<template>
    <div class="flex flex-col gap-4 w-72">
        <div class="p-5">
            <a href="/" class>
                <svg width="137" height="42" viewBox="0 0 137 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0.722168 21.438V18.422H4.51817V14.704H7.50817V18.422H11.1742V21.438H7.50817V25H4.51817V21.438H0.722168Z" fill="#334155" />
                    <path d="M27.8983 24.272C27.8983 25.2773 27.7423 26.2047 27.4303 27.054C27.1356 27.9207 26.7023 28.666 26.1303 29.29C25.5583 29.914 24.8649 30.3993 24.0503 30.746C23.2356 31.11 22.3256 31.292 21.3203 31.292H19.6043C17.6629 31.292 16.1549 30.694 15.0803 29.498C14.0056 28.302 13.4683 26.664 13.4683 24.584V19.852H16.7443V24.428C16.7443 24.9307 16.7963 25.3813 16.9003 25.78C17.0043 26.196 17.1776 26.5427 17.4203 26.82C17.6803 27.1147 18.0183 27.34 18.4343 27.496C18.8676 27.652 19.4049 27.73 20.0463 27.73H21.1903C21.8663 27.73 22.4209 27.6347 22.8543 27.444C23.3049 27.2707 23.6603 27.0193 23.9203 26.69C24.1803 26.378 24.3623 26.014 24.4663 25.598C24.5703 25.182 24.6223 24.74 24.6223 24.272V17.278H27.8983V24.272ZM21.8923 16.992H18.4603V13.846H21.8923V16.992Z" fill="#334155" />
                    <path d="M32.927 27.73C34.0884 27.73 34.9204 27.4613 35.423 26.924C35.9257 26.404 36.2204 25.7627 36.307 25H35.085C34.1837 25 33.447 24.9047 32.875 24.714C32.303 24.5233 31.8524 24.2373 31.523 23.856C31.1937 23.4747 30.9597 23.0153 30.821 22.478C30.6997 21.9233 30.639 21.2907 30.639 20.58C30.639 19.904 30.7344 19.2627 30.925 18.656C31.1157 18.032 31.393 17.4947 31.757 17.044C32.1384 16.5933 32.6064 16.238 33.161 15.978C33.733 15.7007 34.3917 15.562 35.137 15.562C35.7264 15.562 36.281 15.6573 36.801 15.848C37.3384 16.0387 37.8064 16.342 38.205 16.758C38.6037 17.174 38.9157 17.72 39.141 18.396C39.3837 19.072 39.505 19.8953 39.505 20.866V21.438H41.377C41.7584 21.438 41.949 22.01 41.949 23.154C41.949 24.3847 41.7584 25 41.377 25H39.479C39.427 25.8493 39.245 26.6553 38.933 27.418C38.621 28.1807 38.1877 28.848 37.633 29.42C37.0957 29.992 36.437 30.4427 35.657 30.772C34.877 31.1187 34.0104 31.292 33.057 31.292H30.509L30.353 27.73H32.927ZM33.785 20.32C33.785 20.736 33.8717 21.0307 34.045 21.204C34.2357 21.36 34.5824 21.438 35.085 21.438H36.359V20.71C36.359 20.0513 36.2464 19.6007 36.021 19.358C35.813 19.1153 35.4837 18.994 35.033 18.994C34.201 18.994 33.785 19.436 33.785 20.32Z" fill="#334155" />
                    <path d="M43.0611 7.26799L50.9131 4.40799L51.3551 6.69599L43.2171 9.71199L43.0611 7.26799ZM47.5331 21.438C47.8105 21.438 47.9925 21.3773 48.0791 21.256C48.1831 21.1347 48.2351 21.0047 48.2351 20.866C48.2351 20.6407 48.1918 20.4413 48.1051 20.268C48.0358 20.0947 47.8885 19.904 47.6631 19.696L43.2171 15.276V11.558L51.8231 8.41199L52.5251 11.688L46.3891 13.846L49.6651 17.148C50.0811 17.5813 50.4278 17.98 50.7051 18.344C50.9825 18.708 51.1991 19.0633 51.3551 19.41C51.5285 19.7393 51.6498 20.0687 51.7191 20.398C51.7885 20.7273 51.8231 21.074 51.8231 21.438C51.8231 22.0793 51.7191 22.6253 51.5111 23.076C51.3031 23.5267 51.0258 23.8993 50.6791 24.194C50.3325 24.4713 49.9251 24.6793 49.4571 24.818C48.9891 24.9393 48.4865 25 47.9491 25H41.3711C41.1458 25 40.9985 24.8613 40.9291 24.584C40.8425 24.2893 40.7991 23.856 40.7991 23.284C40.7991 22.6253 40.8425 22.1573 40.9291 21.88C40.9985 21.5853 41.1458 21.438 41.3711 21.438H47.5331Z" fill="#334155" />
                    <path d="M54.6616 8.87999H57.9636V25H54.6616V8.87999Z" fill="#334155" />
                    <path d="M64.8294 24.584C64.8294 25.468 64.6648 26.3173 64.3354 27.132C64.0234 27.9467 63.5814 28.6573 63.0094 29.264C62.4548 29.888 61.7874 30.382 61.0074 30.746C60.2448 31.11 59.4128 31.292 58.5114 31.292H56.7954L56.6654 27.73H57.6534C58.3814 27.73 58.9968 27.6347 59.4994 27.444C59.9848 27.2707 60.3748 27.0367 60.6694 26.742C60.9814 26.4473 61.1981 26.1093 61.3194 25.728C61.4581 25.364 61.5274 24.9827 61.5274 24.584V17.278H64.8294V24.584Z" fill="#334155" />
                    <path d="M76.423 18.292C76.9083 18.8467 77.2637 19.4013 77.489 19.956C77.7317 20.5107 77.853 21.048 77.853 21.568C77.853 22.036 77.7663 22.478 77.593 22.894C77.437 23.31 77.1857 23.674 76.839 23.986C76.5097 24.298 76.0937 24.5493 75.591 24.74C75.0883 24.9133 74.5077 25 73.849 25H67.115L66.985 21.438H73.277C73.7277 21.438 73.953 21.2733 73.953 20.944C73.953 20.7707 73.8663 20.5973 73.693 20.424L69.559 15.692L72.133 13.274L76.423 18.292Z" fill="#334155" />
                    <rect x="95" width="42" height="42" rx="12" fill="#8390A2" />
                    <path d="M120.423 19.292C120.908 19.8467 121.264 20.4013 121.489 20.956C121.732 21.5107 121.853 22.048 121.853 22.568C121.853 23.036 121.766 23.478 121.593 23.894C121.437 24.31 121.186 24.674 120.839 24.986C120.51 25.298 120.094 25.5493 119.591 25.74C119.088 25.9133 118.508 26 117.849 26H111.115L110.985 22.438H117.277C117.728 22.438 117.953 22.2733 117.953 21.944C117.953 21.7707 117.866 21.5973 117.693 21.424L113.559 16.692L116.133 14.274L120.423 19.292Z" fill="#F7F8F9" />
                </svg>
            </a>
        </div>

        <div class>
            <div class></div>
        </div>

        <div class="sidebar-menu flex-1 overflow-y-auto">
            <ul class="flex flex-col gap-2" v-if="menus.length">
                <li class="px-2" v-for="(menu, index) in menus" :key="index">
                    <span class v-if="menu.divider">{{ menu.name }}</span>
                    <a
                        v-else-if="menu.submenu !== undefined && menu.submenu.length"
                        @click="open(menu.route)"
                        class="flex text-lg p-2 font-semibold items-center gap-1 rounded-lg transition hover:bg-gray-100 cursor-pointer"
                        :class="{
                            'bg-gray-200 rounded-b-none hover:bg-gray-200': currentMenu === menu.route,
                        }">
                        <i v-if="menu.icon" class="dr pb-0.5 text-2xl ml-1" :class="'dr-' + menu.icon"></i>
                        <span class="flex-1 pt-1 select-none" v-if="menu.name">
                            {{ menu.name }}
                        </span>
                        <span v-if="menu.count" class="pt-1 bg-danger text-white w-5 h-5 flex justify-center items-center rounded-xl text-sm font-light pb-0.5">{{ menu.count }}</span>
                        <span v-if="menu.amount" class="pt-1">{{ menu.amount }}</span>
                        <i
                            v-if="menu.submenu !== undefined && menu.submenu.length"
                            class="dr text-lg dr-arrow-left-2 transition-transform"
                            :class="{
                                'transform -rotate-90': currentMenu === menu.route,
                            }"></i>
                    </a>
                    <router-link v-else :to="menu.route" class="flex text-lg p-2 font-semibold items-center gap-1 rounded-lg transition hover:bg-gray-100">
                        <i v-if="menu.icon" class="dr pb-0.5 text-2xl  ml-1" :class="'dr-' + menu.icon"></i>
                        <span class="flex-1 pt-1" v-if="menu.name">
                            {{ menu.name }}
                        </span>
                        <span v-if="menu.count" class="pt-1 bg-danger text-white w-5 h-5 flex justify-center items-center rounded-xl text-sm font-light pb-0.5">{{ menu.count }}</span>
                        <span v-if="menu.amount" class="pt-1">{{ menu.amount }}</span>
                        <i v-if="menu.submenu !== undefined && menu.submenu.length" class="dr text-lg dr-arrow-left-2" :class="{ 'transform -rotate-45': currentMenu === menu.route }"></i>
                    </router-link>

				
                    <div class="bg-gray-200 rounded-b-lg  max-h-0 overflow-hidden " 
						:class="{
							'max-h-screen' : currentMenu === menu.route
						}">
                        <ul class="text-sm p-4 flex flex-col gap-2" >
                            <li v-for="(smenu, i) in menu.submenu" :key="i">
                                <span class v-if="smenu.divider">{{ smenu.name }}</span>
                                <a v-else-if="smenu.submenu" @click="openSubMenu(smenu.route)" 
								class="p-3 flex gap-2 items-center cursor-pointer rounded-md hover:bg-gray-100"
								:class="{
									'bg-light rounded-b-none hover:bg-ligh' : currentSubMenu === smenu.route
								}"
								>
                                    <span v-if="smenu.name" class="flex-auto">
                                        {{ smenu.name }}
                                    </span>
                                    <span v-if="smenu.count" class="count">{{ smenu.count }}</span>
                                    <span v-if="smenu.amount" class="amount">{{ smenu.amount }}</span>
                                    <i v-if="smenu.submenu !== undefined && smenu.submenu.length" 
									class="dr dr-arrow-left-2 transition-transform"
									:class="{
										'transform -rotate-90' : currentSubMenu === smenu.route
									}"
									></i>
                                </a>
								<router-link :to="smenu.route" v-else class="p-3 flex gap-2 items-center cursor-pointer rounded-md hover:bg-gray-100">
									<span v-if="smenu.name" class="flex-auto">
                                        {{ smenu.name }}
                                    </span>
                                    <span v-if="smenu.count" class="count">{{ smenu.count }}</span>
                                    <span v-if="smenu.amount" class="amount">{{ smenu.amount }}</span>
								</router-link>

                                <div class="bg-light max-h-0 overflow-hidden rounded-b-md" v-if="smenu.submenu" 
									:class="{
										'max-h-screen' : currentSubMenu === smenu.route
									}">
                                    <ul class="p-2">
                                        <li v-for="(ssmenu, si) in smenu.submenu" :key="si">
                                            <router-link :to="ssmenu.route" class="flex p-2 rounded-md hover:bg-gray-100">
                                                <span class="flex-auto" v-if="ssmenu.name">{{ ssmenu.name }}</span>
                                                <span v-if="ssmenu.count" class="count">{{ ssmenu.count }}</span>
                                                <span v-if="ssmenu.amount" class="amount">{{ ssmenu.amount }}</span>
                                            </router-link>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</template>

<script>
export default {
    name: "Sidebar",
    methods: {
        open: function (menu) {
			
                this.currentSubMenu = "";
            if (menu === this.currentMenu) {
                this.currentMenu = "";
            } else {
                this.currentMenu = menu;
            }
        },
        openSubMenu: function (submenu) {
            if (submenu === this.currentSubMenu) {
                this.currentSubMenu = "";
            } else {
                this.currentSubMenu = submenu;
            }
        }
    },
    data() {
        return {
            currentMenu: "",
            currentSubMenu: "",
            menus: [
                {
                    route: "/",
                    name: "پیشخوان",
                    icon: "presention-chart",
                    count: 20
                },
                {
                    route: "/settings",
                    name: "تنظیمات",
                    icon: "setting",
                    submenu: [
                        {
                            route: "/settings",
                            name: "عمومی",
                        },
                        {
							route: "/sfsf",
                            name: "کاربر",
                        },
                    ],
                },
            ],
        };
    },
};
</script>

<style></style>
